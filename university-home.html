<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Campus — University App</title>
    <style>
        :root {
            /* Indigo/Violet Primary */
            --pri-100: #e0e7ff;
            --pri-200: #c7d2fe;
            --pri-500: #6366f1;
            --pri-600: #4f46e5;
            --pri-700: #4338ca;
            --accent: #f59e0b;
            /* Surfaces */
            --bg: #f8f9fc;
            --surf: #ffffff;
            --surf-alt: #f1f3f9;
            /* Text */
            --text: #1e1b4b;
            --text2: #6b7280;
            --text-on-pri: #ffffff;
            /* Border */
            --bdr: #e5e7eb;
            --bdr-focus: #a5b4fc;
            /* Status */
            --green: #10b981;
            --red: #ef4444;
            --amber: #f59e0b;
            --orange: #f59e0b;
            /* Spacing 8pt */
            --s4: 4px;
            --s8: 8px;
            --s12: 12px;
            --s16: 16px;
            --s24: 24px;
            --s32: 32px;
            /* Radius */
            --r4: 4px;
            --r8: 8px;
            --r14: 14px;
            --r999: 999px;
            /* Shadows */
            --sh-sm: 0 1px 3px rgba(0, 0, 0, .05), 0 1px 2px rgba(0, 0, 0, .04);
            --sh-md: 0 4px 12px rgba(0, 0, 0, .08);
            --sh-lg: 0 8px 24px rgba(0, 0, 0, .12);
            --font: -apple-system, BlinkMacSystemFont, 'Noto Sans Thai', 'Segoe UI', Roboto, sans-serif;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%
        }

        body {
            font-family: var(--font);
            color: var(--text);
            background: var(--bg);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased
        }

        @media(prefers-reduced-motion:reduce) {

            *,
            *::before,
            *::after {
                animation-duration: .01ms !important;
                transition-duration: .01ms !important
            }
        }

        button {
            font-family: var(--font);
            cursor: pointer;
            border: none;
            background: none;
            color: inherit
        }

        [hidden] {
            display: none !important
        }

        /* === SHELL === */
        .shell {
            max-width: 430px;
            margin: 0 auto;
            background: var(--bg);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            padding-bottom: 80px
        }

        /* === HEADER (white + 3px gradient strip) === */
        .hdr-strip {
            height: 3px;
            background: linear-gradient(90deg, var(--pri-500), var(--pri-700))
        }

        .hdr {
            background: var(--surf);
            padding: var(--s16);
            border-bottom: 1px solid var(--bdr);
            display: flex;
            align-items: center;
            justify-content: space-between
        }

        .hdr-brand {
            display: flex;
            align-items: center;
            gap: var(--s12)
        }

        .hdr-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--r999);
            background: var(--surf-alt);
            border: 2px solid var(--pri-100);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0
        }

        .hdr-avatar svg {
            width: 22px;
            height: 22px;
            color: var(--text2)
        }

        .hdr-info h1 {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: .5px;
            color: var(--text2);
            line-height: 1.2
        }

        .hdr-info p {
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
            line-height: 1.3
        }

        .hdr-actions {
            display: flex;
            gap: var(--s8);
            align-items: center
        }

        .hdr-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--r999);
            transition: background .15s;
            position: relative
        }

        .hdr-btn:hover {
            background: var(--pri-100)
        }

        .hdr-btn:focus-visible {
            outline: 2px solid var(--bdr-focus);
            outline-offset: 2px
        }

        .hdr-btn svg {
            width: 22px;
            height: 22px;
            color: var(--text)
        }

        .hdr-badge {
            position: absolute;
            top: 4px;
            right: 2px;
            min-width: 16px;
            height: 16px;
            background: var(--red);
            border-radius: var(--r999);
            font-size: 10px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
            color: var(--text-on-pri);
            border: 2px solid var(--surf)
        }

        /* === DEV TOGGLE === */
        .dev {
            display: flex;
            gap: var(--s8);
            padding: var(--s8) var(--s16);
            background: var(--surf);
            border-bottom: 1px solid var(--bdr)
        }

        .dev-btn {
            padding: 2px 10px;
            font-size: 11px;
            font-family: monospace;
            border: 1px solid var(--bdr);
            border-radius: var(--r4);
            background: var(--surf);
            color: var(--text2);
            transition: all .15s
        }

        .dev-btn:hover {
            border-color: var(--pri-500);
            color: var(--pri-500)
        }

        .dev-btn.on {
            background: var(--pri-500);
            color: var(--text-on-pri);
            border-color: var(--pri-500)
        }

        /* === CONTENT === */
        .cnt {
            padding: var(--s16);
            display: flex;
            flex-direction: column;
            gap: var(--s24)
        }

        /* === SECTION HEADER === */
        .sec-h {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            margin-bottom: var(--s12)
        }

        .sec-h h2 {
            font-size: 17px;
            font-weight: 700;
            color: var(--text)
        }

        .sec-h button {
            font-size: 13px;
            color: var(--pri-500);
            padding: var(--s4) var(--s8);
            border-radius: var(--r8);
            min-height: 44px;
            display: flex;
            align-items: center;
            transition: background .15s
        }

        .sec-h button:hover {
            background: var(--pri-100)
        }

        .sec-h button:focus-visible {
            outline: 2px solid var(--bdr-focus);
            outline-offset: 2px
        }

        /* === QUICK INFO === */
        .qi {
            display: flex;
            gap: var(--s12)
        }

        .qi-card {
            flex: 1;
            background: var(--surf);
            border-radius: var(--r14);
            padding: var(--s12) var(--s16);
            box-shadow: var(--sh-sm);
            border: 1px solid var(--bdr);
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 60px
        }

        .qi-card h3 {
            font-size: 22px;
            font-weight: 700;
            color: var(--text);
            line-height: 1
        }

        .qi-card small {
            font-size: 11px;
            color: var(--text2);
            display: block;
            margin-top: 2px
        }

        .qi-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--r999);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0
        }

        .qi-icon svg {
            width: 20px;
            height: 20px
        }

        .qi-weather .qi-icon {
            background: var(--pri-100);
            color: var(--pri-500)
        }

        .qi-aqi-badge {
            display: inline-flex;
            align-items: center;
            font-size: 12px;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: var(--r999);
            background: var(--green);
            color: var(--text-on-pri);
            line-height: 1
        }

        .qi-aqi .qi-icon {
            background: #d1fae5;
            color: var(--green)
        }

        /* === NEWS CAROUSEL === */
        .news-scroll {
            display: flex;
            gap: var(--s12);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding-bottom: var(--s4);
            scroll-snap-type: x mandatory
        }

        .news-scroll::-webkit-scrollbar {
            display: none
        }

        .news-card {
            flex-shrink: 0;
            width: 260px;
            border-radius: var(--r14);
            overflow: hidden;
            background: var(--surf);
            box-shadow: var(--sh-sm);
            border: 1px solid var(--bdr);
            scroll-snap-align: start;
            transition: transform .15s, box-shadow .15s;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent
        }

        .news-card:hover {
            box-shadow: var(--sh-md)
        }

        .news-card:active {
            transform: scale(.985)
        }

        .news-card:focus-visible {
            outline: 2px solid var(--bdr-focus);
            outline-offset: 2px
        }

        .news-thumb {
            width: 100%;
            height: 140px;
            position: relative;
            overflow: hidden
        }

        .news-thumb-bg {
            position: absolute;
            inset: 0
        }

        .news-tag {
            position: absolute;
            top: var(--s8);
            left: var(--s8);
            background: var(--pri-500);
            color: var(--text-on-pri);
            font-size: 10px;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: var(--r999);
            line-height: 1.2
        }

        .news-body {
            padding: var(--s12) 14px
        }

        .news-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.45;
            margin-bottom: var(--s4)
        }

        .news-date {
            font-size: 12px;
            color: var(--text2)
        }

        /* === SERVICE GRID === */
        .svc-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--s12)
        }

        .svc-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: var(--s8) var(--s4);
            border-radius: var(--r14);
            transition: background .15s, transform .1s;
            -webkit-tap-highlight-color: transparent;
            min-height: 44px
        }

        .svc-item:hover {
            background: var(--pri-100)
        }

        .svc-item:active {
            transform: scale(.95);
            background: var(--pri-100)
        }

        .svc-item:focus-visible {
            outline: 2px solid var(--bdr-focus);
            outline-offset: 2px
        }

        .svc-icon {
            width: 44px;
            height: 44px;
            border-radius: var(--r14);
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--surf-alt)
        }

        .svc-icon svg {
            width: 22px;
            height: 22px;
            color: var(--pri-500);
            stroke-width: 1.5
        }

        .svc-label {
            font-size: 11px;
            color: var(--text);
            font-weight: 500;
            text-align: center;
            line-height: 1.3;
            word-break: keep-all
        }

        /* === APPOINTMENT === */
        .apt-scroll {
            display: flex;
            gap: var(--s12);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding-bottom: var(--s4)
        }

        .apt-scroll::-webkit-scrollbar {
            display: none
        }

        .apt-card {
            flex-shrink: 0;
            width: 270px;
            background: var(--surf);
            border-radius: var(--r14);
            padding: var(--s16);
            box-shadow: var(--sh-sm);
            border: 1px solid var(--bdr);
            border-left: 3px solid var(--pri-500);
            cursor: pointer;
            transition: box-shadow .15s;
            -webkit-tap-highlight-color: transparent
        }

        .apt-card:hover {
            box-shadow: var(--sh-md)
        }

        .apt-card:focus-visible {
            outline: 2px solid var(--bdr-focus);
            outline-offset: 2px
        }

        .apt-card.meeting {
            border-left-color: var(--amber)
        }

        .apt-type {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: .8px;
            margin-bottom: var(--s4)
        }

        .apt-card:not(.meeting) .apt-type {
            color: var(--pri-500)
        }

        .apt-card.meeting .apt-type {
            color: var(--amber)
        }

        .apt-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--s4);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.4
        }

        .apt-loc {
            font-size: 12px;
            color: var(--text2);
            display: flex;
            align-items: center;
            gap: var(--s4);
            margin-bottom: var(--s8);
            line-height: 1.4
        }

        .apt-loc svg {
            width: 14px;
            height: 14px;
            flex-shrink: 0
        }

        .apt-chip {
            display: inline-flex;
            align-items: center;
            gap: var(--s4);
            font-size: 12px;
            font-weight: 500;
            padding: var(--s4) var(--s8);
            border-radius: var(--r999);
            background: var(--surf-alt);
            color: var(--text);
            border: 1px solid var(--bdr)
        }

        .apt-chip svg {
            width: 12px;
            height: 12px
        }

        /* === BOTTOM NAV === */
        .bnav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 430px;
            background: var(--surf);
            border-top: 1px solid var(--bdr);
            box-shadow: 0 -1px 4px rgba(0, 0, 0, .04);
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: var(--s4) 0;
            padding-bottom: env(safe-area-inset-bottom, 8px);
            z-index: 200;
            height: 64px
        }

        .bnav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            padding: var(--s4);
            min-width: 56px;
            min-height: 48px;
            border-radius: var(--r8);
            transition: background .15s;
            justify-content: center
        }

        .bnav-item:hover {
            background: var(--surf-alt)
        }

        .bnav-item:focus-visible {
            outline: 2px solid var(--bdr-focus);
            outline-offset: 2px
        }

        .bnav-item svg {
            width: 24px;
            height: 24px;
            color: var(--text2)
        }

        .bnav-item span {
            font-size: 10px;
            color: var(--text2);
            font-weight: 500
        }

        .bnav-item.active svg {
            color: var(--pri-500)
        }

        .bnav-item.active span {
            color: var(--pri-500);
            font-weight: 600
        }

        .bnav-spacer {
            width: 64px
        }

        /* === FAB (overlaps nav by 28dp) === */
        .fab {
            position: fixed;
            bottom: calc(64px + env(safe-area-inset-bottom, 8px) - 28px);
            left: 50%;
            transform: translateX(-50%);
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--pri-500), var(--pri-700));
            border-radius: var(--r999);
            box-shadow: 0 4px 12px rgba(99, 102, 241, .35), 0 0 0 4px var(--surf);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 201;
            transition: transform .15s, box-shadow .15s
        }

        .fab:hover {
            transform: translateX(-50%) scale(1.06)
        }

        .fab:active {
            transform: translateX(-50%) scale(.95)
        }

        .fab:focus-visible {
            outline: 2px solid var(--pri-700);
            outline-offset: 4px
        }

        .fab svg {
            width: 26px;
            height: 26px;
            color: var(--text-on-pri)
        }

        /* === MODAL === */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, .4);
            z-index: 300;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity .25s
        }

        .modal-overlay.open {
            opacity: 1;
            pointer-events: auto
        }

        .modal-sheet {
            width: 100%;
            max-width: 430px;
            background: var(--surf);
            border-radius: var(--r14) var(--r14) 0 0;
            padding: var(--s16) var(--s16) var(--s32);
            transform: translateY(100%);
            transition: transform .3s cubic-bezier(.4, 0, .2, 1)
        }

        .modal-overlay.open .modal-sheet {
            transform: translateY(0)
        }

        .modal-handle {
            width: 40px;
            height: 4px;
            background: var(--bdr);
            border-radius: var(--r999);
            margin: 0 auto var(--s16)
        }

        .modal-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--s24)
        }

        .modal-head h3 {
            font-size: 18px;
            font-weight: 700;
            color: var(--text)
        }

        .modal-close {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--r999);
            background: var(--surf-alt);
            transition: background .15s
        }

        .modal-close:hover {
            background: var(--bdr)
        }

        .modal-close:focus-visible {
            outline: 2px solid var(--bdr-focus);
            outline-offset: 2px
        }

        .modal-close svg {
            width: 18px;
            height: 18px;
            color: var(--text2)
        }

        .modal-body {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--s16);
            padding: var(--s24) 0
        }

        .qr-frame {
            width: 200px;
            height: 200px;
            border: 3px dashed var(--pri-500);
            border-radius: var(--r14);
            display: flex;
            align-items: center;
            justify-content: center
        }

        .qr-frame svg {
            width: 80px;
            height: 80px;
            color: var(--bdr)
        }

        .qr-hint {
            font-size: 14px;
            color: var(--text2);
            text-align: center
        }

        /* === SKELETON === */
        @keyframes shimmer {
            0% {
                background-position: -200% 0
            }

            100% {
                background-position: 200% 0
            }
        }

        .sk {
            background: linear-gradient(90deg, var(--surf-alt) 25%, var(--bdr) 50%, var(--surf-alt) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: var(--r8)
        }

        /* === EMPTY === */
        .empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--s32) var(--s16);
            text-align: center
        }

        .empty-icon {
            width: 72px;
            height: 72px;
            background: var(--pri-100);
            border-radius: var(--r999);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--s16)
        }

        .empty-icon svg {
            width: 36px;
            height: 36px;
            color: var(--pri-500)
        }

        .empty h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--s4)
        }

        .empty p {
            font-size: 14px;
            color: var(--text2)
        }

        /* === ERROR === */
        .err {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: var(--r14);
            padding: var(--s16);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--s12);
            text-align: center
        }

        .err-icon {
            width: 44px;
            height: 44px;
            background: #fee2e2;
            border-radius: var(--r999);
            display: flex;
            align-items: center;
            justify-content: center
        }

        .err-icon svg {
            width: 22px;
            height: 22px;
            color: var(--red)
        }

        .err p {
            font-size: 14px;
            color: var(--text2)
        }

        .err-btn {
            height: 44px;
            padding: 0 var(--s24);
            background: var(--pri-500);
            color: var(--text-on-pri);
            border-radius: var(--r999);
            font-size: 14px;
            font-weight: 500;
            transition: background .15s, transform .1s
        }

        .err-btn:hover {
            background: var(--pri-600)
        }

        .err-btn:active {
            transform: scale(.97)
        }

        .err-btn:focus-visible {
            outline: 2px solid var(--bdr-focus);
            outline-offset: 2px
        }

        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0
        }
    </style>
</head>

<body>

    <div class="shell" id="app">
        <!-- 3px gradient strip -->
        <div class="hdr-strip" aria-hidden="true"></div>
        <!-- HEADER -->
        <header class="hdr" role="banner">
            <div class="hdr-brand">
                <div class="hdr-avatar" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="8" r="4" />
                        <path d="M20 21a8 8 0 1 0-16 0" />
                    </svg></div>
                <div class="hdr-info">
                    <h1>Krungthai</h1>
                    <p>Campus</p>
                </div>
            </div>
            <div class="hdr-actions">
                <button class="hdr-btn" aria-label="Logout"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                        <polyline points="16 17 21 12 16 7" />
                        <line x1="21" y1="12" x2="9" y2="12" />
                    </svg></button>
                <button class="hdr-btn" aria-label="Notifications"><svg viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                        <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                    </svg><span class="hdr-badge">3</span></button>
            </div>
        </header>

        <!-- DEV TOGGLE -->
        <nav class="dev" aria-label="Dev state toggle">
            <button class="dev-btn on" data-state="default" onclick="setState('default')">default</button>
            <button class="dev-btn" data-state="loading" onclick="setState('loading')">loading</button>
            <button class="dev-btn" data-state="empty" onclick="setState('empty')">empty</button>
            <button class="dev-btn" data-state="error" onclick="setState('error')">error</button>
        </nav>

        <!-- MAIN -->
        <main class="cnt" id="main" role="main"></main>
    </div>

    <!-- BOTTOM NAV -->
    <nav class="bnav" role="navigation" aria-label="Main menu" id="bnav">
        <button class="bnav-item active" aria-label="Home" aria-current="page"><svg viewBox="0 0 24 24"
                fill="currentColor">
                <path
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-4 0a1 1 0 01-1-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 01-1 1h-2z" />
            </svg><span>Home</span></button>
        <button class="bnav-item" aria-label="My Card"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="5" width="20" height="14" rx="2" />
                <line x1="2" y1="10" x2="22" y2="10" />
            </svg><span>My Card</span></button>
        <div class="bnav-spacer"></div>
        <button class="bnav-item" aria-label="Challenge"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon
                    points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
            </svg><span>Challenge</span></button>
        <button class="bnav-item" aria-label="Setting"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3" />
                <path
                    d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
            </svg><span>Setting</span></button>
    </nav>

    <!-- FAB -->
    <button class="fab" id="fab" aria-label="Scan QR" onclick="openModal()"><svg viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="7" height="7" />
            <rect x="14" y="3" width="7" height="7" />
            <rect x="3" y="14" width="7" height="7" />
            <rect x="14" y="14" width="7" height="7" />
        </svg></button>

    <!-- QR MODAL -->
    <div class="modal-overlay" id="modal" role="dialog" aria-modal="true" aria-label="สแกน QR"
        onclick="closeModalBg(event)">
        <div class="modal-sheet">
            <div class="modal-handle"></div>
            <div class="modal-head">
                <h3>สแกน QR</h3><button class="modal-close" aria-label="Close" onclick="closeModal()"><svg
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg></button>
            </div>
            <div class="modal-body">
                <div class="qr-frame"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <rect x="3" y="3" width="7" height="7" />
                        <rect x="14" y="3" width="7" height="7" />
                        <rect x="3" y="14" width="7" height="7" />
                        <rect x="14" y="14" width="7" height="7" />
                        <line x1="12" y1="3" x2="12" y2="21" />
                        <line x1="3" y1="12" x2="21" y2="12" />
                    </svg></div>
                <p class="qr-hint">Place QR Code inside the frame to scan</p>
            </div>
        </div>
    </div>

    <script>
        const I = {
            sun: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',
            wind: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9.59 4.59A2 2 0 1111 8H2m10.59 11.41A2 2 0 1014 16H2m15.73-8.27A2.5 2.5 0 1119.5 12H2"/></svg>',
            pin: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>',
            clock: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>',
            err: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>',
            empty: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>'
        };
        const SVC = {
            community: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>',
            elearning: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"/></svg>',
            payment: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>',
            place: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>',
            vote: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg>',
            reservation: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>',
            transit: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="14" rx="2"/><path d="M8 21h8"/><path d="M12 17v4"/><circle cx="8" cy="13" r="1"/><circle cx="16" cy="13" r="1"/></svg>',
            transcript: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>',
            library: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/><path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/></svg>',
            contact: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"/></svg>'
        };
        const NEWS = [
            { id: 1, title: 'Volunteer Project — Community Service for Semester 2', date: '18 Feb 2026', tag: 'New', bg: 'linear-gradient(135deg,#6366f1,#4338ca)' },
            { id: 2, title: '58th Anniversary Celebration — Special Events All Month', date: '15 Feb 2026', tag: 'Event', bg: 'linear-gradient(135deg,#ec4899,#be185d)' },
            { id: 3, title: 'Scholarship Applications Now Open for Honor Students', date: '10 Feb 2026', tag: 'Scholarship', bg: 'linear-gradient(135deg,#8b5cf6,#6d28d9)' },
            { id: 4, title: 'Innovation Workshop — Community Business Plans for Sustainability', date: '8 Feb 2026', tag: null, bg: 'linear-gradient(135deg,#10b981,#059669)' }
        ];
        const SVCS = [
            { id: 'community', label: 'Community', icon: 'community' }, { id: 'elearning', label: 'E-learning', icon: 'elearning' },
            { id: 'payment', label: 'Payment', icon: 'payment' }, { id: 'place', label: 'Place', icon: 'place' },
            { id: 'vote', label: 'Vote', icon: 'vote' }, { id: 'reservation', label: 'Reservation', icon: 'reservation' },
            { id: 'transit', label: 'Transit', icon: 'transit' }, { id: 'transcript', label: 'Transcript<br>& Advisory', icon: 'transcript' },
            { id: 'library', label: 'Library', icon: 'library' }, { id: 'contact', label: 'Contact Us', icon: 'contact' }
        ];
        const APTS = [
            { type: 'Class', title: 'CS 241 — Web Management Systems', loc: 'Room 2309 — 60th Building, Faculty of Science', time: '09:00 – 10:00', code: 'CS241' },
            { type: 'Meeting', title: 'Student Council Assembly #4/2026', loc: 'Room 22311 — Activities Building, Main Hall', time: '13:00 – 15:00', code: 'My Event' }
        ];

        let state = new URLSearchParams(location.search).get('state') || 'default';
        function openModal() { document.getElementById('modal').classList.add('open') }
        function closeModal() { document.getElementById('modal').classList.remove('open') }
        function closeModalBg(e) { if (e.target === e.currentTarget) closeModal() }
        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal() });

        function setState(s) {
            state = s;
            document.querySelectorAll('.dev-btn').forEach(b => b.classList.toggle('on', b.dataset.state === s));
            const u = new URL(location); s === 'default' ? u.searchParams.delete('state') : u.searchParams.set('state', s);
            history.replaceState(null, '', u); render();
        }

        function render() {
            const m = document.getElementById('main');
            if (state === 'loading') { m.innerHTML = renderLoading(); return }
            if (state === 'error') { m.innerHTML = renderError(); return }
            if (state === 'empty') { m.innerHTML = renderEmpty(); return }
            m.innerHTML = renderQI() + renderNews() + renderSvc() + renderApt();
            document.querySelectorAll('.svc-item').forEach(b => b.addEventListener('click', () => console.log('Service:', b.dataset.svc)));
        }

        function renderQI() {
            return `<section class="qi" aria-label="Quick info">
    <div class="qi-card qi-weather"><div><h3>32°</h3><small>Caution — strong sunlight</small></div><div class="qi-icon">${I.sun}</div></div>
    <div class="qi-card qi-aqi"><div><span class="qi-aqi-badge">50 Good</span><small>AQI · 2:30 PM</small></div><div class="qi-icon">${I.wind}</div></div>
  </section>`;
        }

        function renderNews() {
            const cards = NEWS.map(n => `<article class="news-card" tabindex="0" aria-label="${esc(n.title)}">
    <div class="news-thumb"><div class="news-thumb-bg" style="background:${n.bg}"></div>${n.tag ? `<span class="news-tag">${n.tag}</span>` : ''}</div>
    <div class="news-body"><p class="news-title">${n.title}</p><span class="news-date">${n.date}</span></div></article>`).join('');
            return `<section aria-label="What's New"><div class="sec-h"><h2>What's New</h2><button>ดูทั้งหมด</button></div><div class="news-scroll">${cards}</div></section>`;
        }

        function renderSvc() {
            const items = SVCS.map(s => `<button class="svc-item" data-svc="${s.id}" aria-label="${s.label.replace(/<br>/g, ' ')}">
    <div class="svc-icon">${SVC[s.icon] || ''}</div><span class="svc-label">${s.label}</span></button>`).join('');
            return `<section aria-label="Service"><div class="sec-h"><h2>Service</h2><button>ดูทั้งหมด</button></div><div class="svc-grid">${items}</div></section>`;
        }

        function renderApt() {
            const cards = APTS.map(a => `<article class="apt-card${a.type === 'Meeting' ? ' meeting' : ''}" tabindex="0" aria-label="${esc(a.title)}">
    <span class="apt-type">${a.type}</span><p class="apt-title">${a.title}</p>
    <p class="apt-loc">${I.pin} ${a.loc}</p><span class="apt-chip">${I.clock} ${a.time}</span></article>`).join('');
            return `<section aria-label="Upcoming Appointment"><div class="sec-h"><h2>Upcoming Appointment</h2><button>ดูทั้งหมด</button></div><div class="apt-scroll">${cards}</div></section>`;
        }

        function renderLoading() {
            const skCard = `<div style="flex-shrink:0;width:260px;border-radius:14px;overflow:hidden;border:1px solid var(--bdr)"><div class="sk" style="height:140px;border-radius:0"></div><div style="padding:12px 14px"><div class="sk" style="height:14px;width:80%;margin-bottom:8px"></div><div class="sk" style="height:12px;width:50%"></div></div></div>`;
            const skSvc = Array(10).fill(0).map(() => '<div style="display:flex;flex-direction:column;align-items:center;gap:6px"><div class="sk" style="width:44px;height:44px;border-radius:14px"></div><div class="sk" style="width:36px;height:10px;border-radius:4px"></div></div>').join('');
            return `
    <section class="qi"><div class="sk" style="flex:1;height:60px;border-radius:14px"></div><div class="sk" style="flex:1;height:60px;border-radius:14px"></div></section>
    <section><div style="display:flex;justify-content:space-between;margin-bottom:12px"><div class="sk" style="width:100px;height:18px"></div><div class="sk" style="width:60px;height:14px"></div></div><div style="display:flex;gap:12px;overflow:hidden">${skCard}${skCard}</div></section>
    <section><div style="display:flex;justify-content:space-between;margin-bottom:12px"><div class="sk" style="width:70px;height:18px"></div><div class="sk" style="width:60px;height:14px"></div></div><div style="display:grid;grid-template-columns:repeat(5,1fr);gap:12px">${skSvc}</div></section>
    <section><div style="display:flex;justify-content:space-between;margin-bottom:12px"><div class="sk" style="width:180px;height:18px"></div><div class="sk" style="width:60px;height:14px"></div></div><div class="sk" style="height:120px;border-radius:14px;margin-bottom:12px"></div><div class="sk" style="height:120px;border-radius:14px"></div></section>
    <span class="visually-hidden" role="status" aria-live="polite">Loading…</span>`;
        }

        function renderEmpty() { return `<div class="empty" role="status"><div class="empty-icon">${I.empty}</div><h3>ยังไม่มีข้อมูลในขณะนี้</h3><p>Please check back later</p></div>` }
        function renderError() { return `<div class="err" role="alert"><div class="err-icon">${I.err}</div><p>ขออภัย ระบบไม่สามารถโหลดข้อมูลได้</p><button class="err-btn" onclick="setState('default')">ลองใหม่</button></div>` }
        function esc(s) { const d = document.createElement('div'); d.textContent = s; return d.innerHTML }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.dev-btn').forEach(b => b.classList.toggle('on', b.dataset.state === state));
            render();
        });
    </script>
</body>

</html>